{"version":3,"file":"commonHelpers.js","sources":["../src/js/pixabay-api.js","../src/js/render-functions.js","../src/main.js"],"sourcesContent":["import axios from 'axios';\n\nconst API_KEY = '43225123-d236907a3b16930b7c1176894';\nconst DEFAULT_PER_PAGE = 15;\n\nexport async function fetchImages(query, page = 1, perPage = DEFAULT_PER_PAGE) {\n  const url = `https://pixabay.com/api/?key=${API_KEY}&q=${query}&image_type=photo&orientation=horizontal&safesearch=true&page=${page}&per_page=${perPage}`;\n\n  try {\n    const response = await axios.get(url);\n    return response.data.hits;\n  } catch (error) {\n    console.error('Error fetching images:', error);\n    return [];\n  }\n}\n","export function renderImages(images) {\n  const galleryElement = document.getElementById('gallery');\n  galleryElement.innerHTML = '';\n\n  images.forEach(image => {\n    const card = `\n        <div class=\"card\">\n          <a href=\"${image.largeImageURL}\" data-lightbox=\"gallery-item\">\n            <img src=\"${image.webformatURL}\" alt=\"${image.tags}\" data-src=\"${image.largeImageURL}\">\n          </a>\n          <div class=\"card-info\">\n            <span>Likes: ${image.likes}</span>\n            <span>Views: ${image.views}</span>\n            <span>Comments: ${image.comments}</span>\n            <span>Downloads: ${image.downloads}</span>\n          </div>\n        </div>\n      `;\n    galleryElement.innerHTML += card;\n  });\n}\n","import iziToast from 'izitoast';\nimport 'izitoast/dist/css/iziToast.min.css';\nimport SimpleLightbox from 'simplelightbox';\nimport 'simplelightbox/dist/simple-lightbox.min.css';\nimport { fetchImages } from './js/pixabay-api.js';\nimport { renderImages } from './js/render-functions.js';\n\nconst form = document.getElementById('search-form');\nconst lightbox = new SimpleLightbox('.gallery a', {\n  captionsData: 'alt',\n  captionDelay: 250,\n});\nconst galleryElement = document.getElementById('gallery');\nconst loadMoreButton = document.getElementById('load-more');\nconst loader = document.getElementById('loader');\nlet searchTerm = '';\nlet page = 1;\nlet allImages = [];\n\nform.addEventListener('submit', async function (event) {\n  event.preventDefault();\n\n  searchTerm = form.querySelector('input[name=\"search\"]').value.trim();\n  if (!searchTerm) {\n    iziToast.error({\n      title: 'Error',\n      message: 'Please enter a search query.',\n      position: 'topCenter',\n    });\n    return;\n  }\n\n  try {\n    page = 1;\n    const images = await fetchImages(searchTerm, page);\n    if (images.length === 0) {\n      iziToast.warning({\n        title: 'Warning',\n        message:\n          'Sorry, there are no images matching your search query. Please try again.',\n        position: 'topCenter',\n      });\n      return;\n    }\n    allImages = images;\n    renderImages(allImages);\n    lightbox.refresh();\n    if (images.length >= 15) {\n      loadMoreButton.style.display = 'block';\n    } else {\n      loadMoreButton.style.display = 'none';\n    }\n  } catch (error) {\n    console.error('Error searching images:', error);\n    iziToast.error({\n      title: 'Error',\n      message:\n        'An error occurred while searching for images. Please try again later.',\n      position: 'topCenter',\n    });\n  }\n});\n\nloadMoreButton.addEventListener('click', async function () {\n  loader.style.display = 'block';\n  try {\n    page++;\n    const images = await fetchImages(searchTerm, page);\n    allImages = allImages.concat(images);\n    renderImages(allImages);\n    lightbox.refresh();\n    loader.style.display = 'none';\n    if (images.length < 15) {\n      loadMoreButton.style.display = 'none';\n    }\n  } catch (error) {\n    console.error('Error loading more images:', error);\n    iziToast.error({\n      title: 'Error',\n      message:\n        'An error occurred while loading more images. Please try again later.',\n      position: 'topCenter',\n    });\n    loader.style.display = 'none';\n  }\n});\nloadMoreButton.addEventListener('click', async function () {\n  loader.style.display = 'block';\n  try {\n    page++;\n    const images = await fetchImages(searchTerm, page);\n    allImages = allImages.concat(images);\n    renderImages(allImages);\n    lightbox.refresh();\n    loader.style.display = 'none';\n    if (images.length < 15) {\n      loadMoreButton.style.display = 'none';\n    }\n    const cardHeight = galleryElement\n      .querySelector('.card')\n      .getBoundingClientRect().height;\n    window.scrollBy({\n      top: cardHeight * 2,\n      behavior: 'smooth',\n    });\n  } catch (error) {\n    console.error('Error loading more images:', error);\n    iziToast.error({\n      title: 'Error',\n      message:\n        'An error occurred while loading more images. Please try again later.',\n      position: 'topCenter',\n    });\n    loader.style.display = 'none';\n  }\n});\n"],"names":["API_KEY","DEFAULT_PER_PAGE","fetchImages","query","page","perPage","url","axios","error","renderImages","images","galleryElement","image","card","form","lightbox","SimpleLightbox","loadMoreButton","loader","searchTerm","allImages","event","iziToast","cardHeight"],"mappings":"owBAEA,MAAMA,EAAU,qCACVC,EAAmB,GAElB,eAAeC,EAAYC,EAAOC,EAAO,EAAGC,EAAUJ,EAAkB,CAC7E,MAAMK,EAAM,gCAAgCN,CAAO,MAAMG,CAAK,iEAAiEC,CAAI,aAAaC,CAAO,GAEvJ,GAAI,CAEF,OADiB,MAAME,EAAM,IAAID,CAAG,GACpB,KAAK,IACtB,OAAQE,EAAO,CACd,eAAQ,MAAM,yBAA0BA,CAAK,EACtC,EACR,CACH,CCfO,SAASC,EAAaC,EAAQ,CACnC,MAAMC,EAAiB,SAAS,eAAe,SAAS,EACxDA,EAAe,UAAY,GAE3BD,EAAO,QAAQE,GAAS,CACtB,MAAMC,EAAO;AAAA;AAAA,qBAEID,EAAM,aAAa;AAAA,wBAChBA,EAAM,YAAY,UAAUA,EAAM,IAAI,eAAeA,EAAM,aAAa;AAAA;AAAA;AAAA,2BAGrEA,EAAM,KAAK;AAAA,2BACXA,EAAM,KAAK;AAAA,8BACRA,EAAM,QAAQ;AAAA,+BACbA,EAAM,SAAS;AAAA;AAAA;AAAA,QAI1CD,EAAe,WAAaE,CAChC,CAAG,CACH,CCbA,MAAMC,EAAO,SAAS,eAAe,aAAa,EAC5CC,EAAW,IAAIC,EAAe,aAAc,CAChD,aAAc,MACd,aAAc,GAChB,CAAC,EACKL,EAAiB,SAAS,eAAe,SAAS,EAClDM,EAAiB,SAAS,eAAe,WAAW,EACpDC,EAAS,SAAS,eAAe,QAAQ,EAC/C,IAAIC,EAAa,GACbf,EAAO,EACPgB,EAAY,CAAA,EAEhBN,EAAK,iBAAiB,SAAU,eAAgBO,EAAO,CAIrD,GAHAA,EAAM,eAAc,EAEpBF,EAAaL,EAAK,cAAc,sBAAsB,EAAE,MAAM,OAC1D,CAACK,EAAY,CACfG,EAAS,MAAM,CACb,MAAO,QACP,QAAS,+BACT,SAAU,WAChB,CAAK,EACD,MACD,CAED,GAAI,CACFlB,EAAO,EACP,MAAMM,EAAS,MAAMR,EAAYiB,EAAYf,CAAI,EACjD,GAAIM,EAAO,SAAW,EAAG,CACvBY,EAAS,QAAQ,CACf,MAAO,UACP,QACE,2EACF,SAAU,WAClB,CAAO,EACD,MACD,CACDF,EAAYV,EACZD,EAAaW,CAAS,EACtBL,EAAS,QAAO,EACZL,EAAO,QAAU,GACnBO,EAAe,MAAM,QAAU,QAE/BA,EAAe,MAAM,QAAU,MAElC,OAAQT,EAAO,CACd,QAAQ,MAAM,0BAA2BA,CAAK,EAC9Cc,EAAS,MAAM,CACb,MAAO,QACP,QACE,wEACF,SAAU,WAChB,CAAK,CACF,CACH,CAAC,EAEDL,EAAe,iBAAiB,QAAS,gBAAkB,CACzDC,EAAO,MAAM,QAAU,QACvB,GAAI,CACFd,IACA,MAAMM,EAAS,MAAMR,EAAYiB,EAAYf,CAAI,EACjDgB,EAAYA,EAAU,OAAOV,CAAM,EACnCD,EAAaW,CAAS,EACtBL,EAAS,QAAO,EAChBG,EAAO,MAAM,QAAU,OACnBR,EAAO,OAAS,KAClBO,EAAe,MAAM,QAAU,OAElC,OAAQT,EAAO,CACd,QAAQ,MAAM,6BAA8BA,CAAK,EACjDc,EAAS,MAAM,CACb,MAAO,QACP,QACE,uEACF,SAAU,WAChB,CAAK,EACDJ,EAAO,MAAM,QAAU,MACxB,CACH,CAAC,EACDD,EAAe,iBAAiB,QAAS,gBAAkB,CACzDC,EAAO,MAAM,QAAU,QACvB,GAAI,CACFd,IACA,MAAMM,EAAS,MAAMR,EAAYiB,EAAYf,CAAI,EACjDgB,EAAYA,EAAU,OAAOV,CAAM,EACnCD,EAAaW,CAAS,EACtBL,EAAS,QAAO,EAChBG,EAAO,MAAM,QAAU,OACnBR,EAAO,OAAS,KAClBO,EAAe,MAAM,QAAU,QAEjC,MAAMM,EAAaZ,EAChB,cAAc,OAAO,EACrB,sBAAqB,EAAG,OAC3B,OAAO,SAAS,CACd,IAAKY,EAAa,EAClB,SAAU,QAChB,CAAK,CACF,OAAQf,EAAO,CACd,QAAQ,MAAM,6BAA8BA,CAAK,EACjDc,EAAS,MAAM,CACb,MAAO,QACP,QACE,uEACF,SAAU,WAChB,CAAK,EACDJ,EAAO,MAAM,QAAU,MACxB,CACH,CAAC"}